---
title: "Professional Output Example"
author: Juliet Cohen
date: last-modified
execute: 
  eval: true
format:
  html:
    toc: true
    code-fold: false
    code-summary: "Show the code"
---

# Professional Documents

Professional documents should be easy to follow and get the point across to the reader in a concise manner.

Helpful components include:

-   document header with title, name, and date
    -   ideally, the date reflects the day the document is most recently rendered
-   all packages are loaded together at the top of the document
-   code comments when appropriate
-   clean code indentation
  - for lists, parameters, functions within functions, etc.
-   plots contain all necessary components such as a legend, axes labels, units, helpful palette
-   folding code when appropriate to direct reader's attention to the output
-   hiding chunk outputs for warning messages, loaded packages, and other unnecessary output for a reader
-   succinct documentation between steps, such as section headers, descriptions for an analysis step, and plot interpretation
-   sourcing function definitions or other materials from a separate script
- data citations when appropriate
- documents that include function definitions should include inclusion of warnings and errors that ensure the function and its application are executing intended operations.

## Elephant tracking in Krugar National Park

Elephants are intelligent and gregarious animals that tend to travel as herd and seek resources such as shrubs and water. Elephants in Krugar National Park were collared with GPS tracking devices from August 2007 through August 2009.

**Objective:** Use GPS point locations of individual elephants to visualize their movement throughout Krugar National Park in South Africa between 2007 and 2009.

```{r message = FALSE}
library(tidyverse)
library(here)
library(sf)
library(tmap)
library(rnaturalearth)
library(osmdata)
library(tools)

# load custom functions
source(here("course-materials/resources/good-bad-example/functions.R"))
```

```{r}
elephants_df <- load_csv(filename = "elephants.csv",
                         directory = "course-materials")

elephants <- to_spatial_points(data = elephants_df,
                               latitude_col = "location-lat",
                               longitude_col = "location-long")

metadata_df <- load_csv(filename = "elephants_metadata.csv",
                         directory = "course-materials")
```

## Visualize Data

Plot all elephant observations to visualize the individual movement of elephants:

```{r}
# set bbox to approximate boundaries of Kruger NP
kruger <- osmdata::opq(bbox = c(16, -35, 33, -22)) %>%
          add_osm_feature(key = "boundary", 
                          value = "protected_area") %>%
          add_osm_feature(key = "name", 
                          value = "Kruger National Park") %>%
          osmdata_sf()

# subset imported list of elements to just the geodataframe
kruger_bounds <- kruger$osm_multipolygons

tm_shape(kruger_bounds) +
  tm_borders(col = "black", lwd = 0.5) +
  tm_fill(col = "black") +
  tm_shape(elephants) +
  tm_dots(col = "individual-local-identifier",
          palette = "Set3",
          size = 0.001,
          border.col = "black",
          title = "Individual") +
  tm_layout(bg.color = "darkgrey",
            title = "Elephant Observations\nKruger National Park",
            frame = TRUE,
            title.position = c("center", "top"),
            title.size = 1.2,
            title.fontface = "bold",
            legend.frame = TRUE,
            legend.outside = TRUE,
            legend.position = c(0.08, 0.35),
            legend.title.size = 0.8,
            legend.text.size = 0.6) +
  tm_compass(position = c(0.0, 0.01),
             show.labels = 1)
```

### Map Interpretation

Elephants in Kruger National Park fitted with GPS collars are primarily located in the southern part of the park. The clustered tracks imply that this species is highly gregarious. Tracks that expand beyond park boundaries, notably on the western side, imply that the elephants could be seeking resources such as food or water outside of the park, or error in the GPS collars' location for these points could explain this perceived movement. 


## Data Citations

| Data | Citation | Link |
|------|----------|------|
| Elephant observations | Slotow R, Thaker M, Vanak AT. 2019. Data from: Fine-scale tracking of ambient temperature and movement reveals shuttling behavior of elephants to water. Movebank Data Repository. https://doi.org/10.5441/001/1.403h24q5 | [MoveBank Repository: Fine-scale tracking of ambient temperature and movement reveals shuttling behavior of elephants to water](https://datarepository.movebank.org/entities/datapackage/b777279a-581d-43ce-b790-8e60304fb8b4) |




